# 内存结构
## 程序计数器
### 定义
- Program Counter Register 程序计数器(寄存器)
### 作用
- 作用:记录下一条JVM指令的执行地址
- 特点:
    - 线程私有
    - 不会存在内存溢出
 
## 虚拟机栈
### 定义
- Java Virtual Machine Stacks(虚拟机栈)
    - 每个线程运行时所需要的内存,称为虚拟机栈
    - 每个栈由多个栈帧(Frame)组成,对应着每个方法调用时所占用的内存
    - 每个线程只能有一个活动栈帧,对应当前正在执行的那个方法
    
- 问题辨析
    - 垃圾回收是否涉及内存?不涉及
    - 栈内存分配越大越好吗?
        - 默认为1M: -Xss size <=>  -XX:ThreadStackSize
    - 方法内的局部变量是否线程安全?
        - 如果方法局部变量没有逃离方法的作用访问,它是线程安全的
        - 如果局部变量引用了对象,并逃离方法的作用范围,需要考虑线程安全
        
- 代码实例:
    - com.weiliai.stack.Demo1_1
    - com.weiliai.stack.Demo1_17
    - com.weiliai.stack.Demo1_18
        
### 栈内存溢出
- 栈内存溢出
    - 栈帧过多导致栈内存溢出
    - 栈帧过大导致栈内存溢出

